# CFUV Chess Platform

Welcome to the **CFUV Chess Platform**, a comprehensive web application for playing real-time chess, tracking ELO ratings, and reviewing game history. This project combines a robust Python backend with a dynamic React frontend to deliver a seamless user experience.

## âœ¨ Key Features

- **Real-time Gameplay**: Play chess against other users with instant move updates via WebSockets.
- **ELO Rating System**: Automatic rating adjustments based on game outcomes.
- **Game History**: detailed logs of past games for analysis.
- **User Authentication**: Secure registration and login system.
- **Move Validation**: Full compliance with standard chess rules using `python-chess`.

## ğŸ› ï¸ Technology Stack

### Backend
- **Framework**: FastAPI (Python)
- **Database**: PostgreSQL (Async with SQLAlchemy + asyncpg)
- **Chess Logic**: python-chess
- **WebSockets**: Native FastAPI WebSockets

### Frontend
- **Framework**: React (Vite)
- **Styling**: CSS Modules / Standard CSS
- **State Management**: React Hooks

## ğŸ³ Docker Setup (Recommended)

The easiest way to run the platform is using Docker Compose. This will automatically set up the PostgreSQL database, backend service, and frontend development server.

### Prerequisites
- [Docker](https://docs.docker.com/get-docker/)
- [Docker Compose](https://docs.docker.com/compose/install/)

### Quick Start
1. Navigate to the `chess-site` directory:
   ```bash
   cd chess-site
   ```
2. Build and start the containers:
   ```bash
   docker compose up --build
   ```
3. Access the application:
   - **Frontend**: `http://localhost:5173`
   - **Backend API**: `http://localhost:8000`
   - **Database (Internal)**: Port `5432`
   - **Database (External mapping)**: Port `5433` (to avoid conflicts with local Postgres)

### Management Commands
- **Stop containers**: `docker compose down`
- **View logs**: `docker compose logs -f`
- **Rebuild after changes**: `docker compose up --build`
- **Clean up volumes**: `docker compose down -v`

---

## ğŸš€ Manual Installation & Setup (Alternative)

### ğŸ“‹ Prerequisites
Before you begin, ensure you have the following installed:
- **Python 3.8+**
- **Node.js 16+** & **npm**
- **PostgreSQL** (running locally or accessible via URL)

### ğŸ”‘ Environment Variables
The backend requires specific environment variables to function correctly.

1. Create a `.env` file in the `chess-site/backend` directory.
2. Add the following variables:

```env
# chess-site/backend/.env
SECRET_KEY=your_super_secret_key_here
DATABASE_URL=postgresql+asyncpg://postgres:password@localhost/chess_db
```

### 1. Backend Setup

Navigate to the backend directory and install dependencies:

```bash
cd chess-site/backend
python -m venv venv
source venv/bin/activate  # On Windows use: venv\Scripts\activate
pip install -r requirements.txt
```

**Run the Backend Server:**

```bash
uvicorn main:app --reload
```
*The backend will be available at `http://localhost:8000`*

### 2. Frontend Setup

Open a new terminal, navigate to the frontend directory, and install dependencies:

```bash
cd chess-site/frontend
npm install
```

**Run the Frontend Development Server:**

```bash
npm run dev
```
*The application will be accessible at `http://localhost:5173`*

## ğŸ”Œ API Endpoints

The backend documentation is automatically generated by FastAPI. Once the server is running, visit:
- **Swagger UI**: [http://localhost:8000/docs](http://localhost:8000/docs)
- **ReDoc**: [http://localhost:8000/redoc](http://localhost:8000/redoc)

### Core Endpoints
- **Auth**: `/register`, `/login`, `/users/me`
- **Games**: `/games` (Create/List), `/games/{id}` (Get state), `/games/{id}/move` (Make move)
- **History**: `/games/{id}/history`, `/users/{id}/history`
- **WebSockets**: `ws://localhost:8000/ws/game/{id}`

## ğŸ“ Project Structure

```
cfuv_chess/
â”œâ”€â”€ README.md               # Project documentation
â””â”€â”€ chess-site/
    â”œâ”€â”€ backend/            # FastAPI application
    â”‚   â”œâ”€â”€ main.py         # App entry point
    â”‚   â”œâ”€â”€ games.py        # Game logic & routes
    â”‚   â”œâ”€â”€ auth.py         # Authentication logic
    â”‚   â”œâ”€â”€ database.py     # DB connection & session
    â”‚   â”œâ”€â”€ models.py       # SQLAlchemy models
    â”‚   â””â”€â”€ .env            # Environment variables (Create this!)
    â””â”€â”€ frontend/           # React application
        â”œâ”€â”€ src/
        â”œâ”€â”€ package.json
        â””â”€â”€ vite.config.js
```
